<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vuex | 震雨Rain</title>
    <meta name="description" content="震雨rain的博客,Webgis,arcgis,openlayer,css,javascript">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.32db2aa6.css" as="style"><link rel="preload" href="/assets/js/app.3276a3f8.js" as="script"><link rel="preload" href="/assets/js/2.815c1064.js" as="script"><link rel="preload" href="/assets/js/17.2c30d55b.js" as="script"><link rel="preload" href="/assets/js/6.06272484.js" as="script"><link rel="prefetch" href="/assets/js/10.c642cfb5.js"><link rel="prefetch" href="/assets/js/11.ad9cab41.js"><link rel="prefetch" href="/assets/js/12.e46ecf84.js"><link rel="prefetch" href="/assets/js/13.cb602960.js"><link rel="prefetch" href="/assets/js/14.a2715761.js"><link rel="prefetch" href="/assets/js/15.c8ad7559.js"><link rel="prefetch" href="/assets/js/16.15b0a189.js"><link rel="prefetch" href="/assets/js/18.c8445cfc.js"><link rel="prefetch" href="/assets/js/19.5b25504c.js"><link rel="prefetch" href="/assets/js/20.086bab00.js"><link rel="prefetch" href="/assets/js/21.aff47ade.js"><link rel="prefetch" href="/assets/js/22.7573ff2c.js"><link rel="prefetch" href="/assets/js/23.216f3520.js"><link rel="prefetch" href="/assets/js/24.9d175692.js"><link rel="prefetch" href="/assets/js/25.d27226e6.js"><link rel="prefetch" href="/assets/js/26.df825f0d.js"><link rel="prefetch" href="/assets/js/27.f61bf4ce.js"><link rel="prefetch" href="/assets/js/28.1e5661bd.js"><link rel="prefetch" href="/assets/js/29.8ac84a5f.js"><link rel="prefetch" href="/assets/js/3.dddd1a0e.js"><link rel="prefetch" href="/assets/js/30.f1aaef3d.js"><link rel="prefetch" href="/assets/js/31.17b755d5.js"><link rel="prefetch" href="/assets/js/32.c0ced720.js"><link rel="prefetch" href="/assets/js/33.aadd6ff5.js"><link rel="prefetch" href="/assets/js/34.7927459f.js"><link rel="prefetch" href="/assets/js/35.87a174bf.js"><link rel="prefetch" href="/assets/js/36.02193950.js"><link rel="prefetch" href="/assets/js/37.ad85f37c.js"><link rel="prefetch" href="/assets/js/38.69d2938c.js"><link rel="prefetch" href="/assets/js/39.a472c18d.js"><link rel="prefetch" href="/assets/js/4.0d32db0b.js"><link rel="prefetch" href="/assets/js/40.4905ae2e.js"><link rel="prefetch" href="/assets/js/41.a2658350.js"><link rel="prefetch" href="/assets/js/42.ad9a51a2.js"><link rel="prefetch" href="/assets/js/43.be291c55.js"><link rel="prefetch" href="/assets/js/44.7fff5500.js"><link rel="prefetch" href="/assets/js/45.63fbc0d1.js"><link rel="prefetch" href="/assets/js/46.774c7559.js"><link rel="prefetch" href="/assets/js/47.9e33b315.js"><link rel="prefetch" href="/assets/js/48.3e7e33ce.js"><link rel="prefetch" href="/assets/js/49.32fcab37.js"><link rel="prefetch" href="/assets/js/5.f2e6a4c0.js"><link rel="prefetch" href="/assets/js/50.3587ac71.js"><link rel="prefetch" href="/assets/js/51.d850ad7a.js"><link rel="prefetch" href="/assets/js/52.e8a9adad.js"><link rel="prefetch" href="/assets/js/53.e3e2318d.js"><link rel="prefetch" href="/assets/js/54.1ddd049a.js"><link rel="prefetch" href="/assets/js/55.d5fc5003.js"><link rel="prefetch" href="/assets/js/56.0b09e657.js"><link rel="prefetch" href="/assets/js/57.dd24bd52.js"><link rel="prefetch" href="/assets/js/58.f654ce6d.js"><link rel="prefetch" href="/assets/js/59.1726b2d2.js"><link rel="prefetch" href="/assets/js/60.48a898d5.js"><link rel="prefetch" href="/assets/js/61.07ffe739.js"><link rel="prefetch" href="/assets/js/62.1fa8112f.js"><link rel="prefetch" href="/assets/js/7.0640f21a.js"><link rel="prefetch" href="/assets/js/8.22f5deb4.js"><link rel="prefetch" href="/assets/js/9.54eeb851.js">
    <link rel="stylesheet" href="/assets/css/0.styles.32db2aa6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="http://img.rain7.top/rain7.top.logo.png" alt="震雨Rain" class="logo"> <span class="site-name can-hide">震雨Rain</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/home/" class="nav-link">
  个人介绍
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/React/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frontend/Webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><a href="/engineering/engineering/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端" class="dropdown-title"><span class="title">服务端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/server/Node/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/server/Golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/server/Python/" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="WebGIS" class="dropdown-title"><span class="title">WebGIS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/WebGIS/Cesium/" class="nav-link">
  Cesium
</a></li><li class="dropdown-item"><!----> <a href="/WebGIS/ArcGIS/" class="nav-link">
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/WebGIS/OpenLayer/" class="nav-link">
  OpenLayer
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="必备工具" class="dropdown-title"><span class="title">必备工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/package/" class="nav-link">
  包管理器
</a></li><li class="dropdown-item"><!----> <a href="/tools/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/GitHub/" class="nav-link">
  GitHub
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人分享" class="dropdown-title"><span class="title">个人分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/article/" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/share/opensource.html" class="nav-link">
  开源项目
</a></li><li class="dropdown-item"><!----> <a href="/share/vscode/" class="nav-link">
  VS Code必备
</a></li><li class="dropdown-item"><!----> <a href="/share/software/" class="nav-link">
  软件推荐
</a></li><li class="dropdown-item"><!----> <a href="/share/website/" class="nav-link">
  网站推荐
</a></li><li class="dropdown-item"><!----> <a href="/frame/index.html" class="nav-link">
  前端工具框架推荐
</a></li><li class="dropdown-item"><!----> <a href="/share/config/" class="nav-link">
  配置文件
</a></li><li class="dropdown-item"><!----> <a href="/share/notes/" class="nav-link">
  笔记
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/home/" class="nav-link">
  个人介绍
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><span class="title">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/frontend/HTML/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/frontend/CSS/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/frontend/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/frontend/TypeScript/" class="nav-link">
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/Vue/Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/React/React/" class="nav-link">
  React
</a></li><li class="dropdown-item"><!----> <a href="/frontend/Webpack/" class="nav-link">
  Webpack
</a></li></ul></div></div><div class="nav-item"><a href="/engineering/engineering/" class="nav-link">
  前端工程化
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="服务端" class="dropdown-title"><span class="title">服务端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/server/Node/" class="nav-link">
  Node.js
</a></li><li class="dropdown-item"><!----> <a href="/server/Golang/" class="nav-link">
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/server/Python/" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="WebGIS" class="dropdown-title"><span class="title">WebGIS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/WebGIS/Cesium/" class="nav-link">
  Cesium
</a></li><li class="dropdown-item"><!----> <a href="/WebGIS/ArcGIS/" class="nav-link">
  ArcGIS
</a></li><li class="dropdown-item"><!----> <a href="/WebGIS/OpenLayer/" class="nav-link">
  OpenLayer
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="必备工具" class="dropdown-title"><span class="title">必备工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tools/package/" class="nav-link">
  包管理器
</a></li><li class="dropdown-item"><!----> <a href="/tools/Git/" class="nav-link">
  Git
</a></li><li class="dropdown-item"><!----> <a href="/tools/GitHub/" class="nav-link">
  GitHub
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人分享" class="dropdown-title"><span class="title">个人分享</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/article/" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/share/opensource.html" class="nav-link">
  开源项目
</a></li><li class="dropdown-item"><!----> <a href="/share/vscode/" class="nav-link">
  VS Code必备
</a></li><li class="dropdown-item"><!----> <a href="/share/software/" class="nav-link">
  软件推荐
</a></li><li class="dropdown-item"><!----> <a href="/share/website/" class="nav-link">
  网站推荐
</a></li><li class="dropdown-item"><!----> <a href="/frame/index.html" class="nav-link">
  前端工具框架推荐
</a></li><li class="dropdown-item"><!----> <a href="/share/config/" class="nav-link">
  配置文件
</a></li><li class="dropdown-item"><!----> <a href="/share/notes/" class="nav-link">
  笔记
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vuex</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Vue/Vuex.html#_1-数据持久化" class="sidebar-link">1.  数据持久化</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="vuex"><a href="#vuex" class="header-anchor">#</a> Vuex</h1> <h2 id="_1-数据持久化"><a href="#_1-数据持久化" class="header-anchor">#</a> 1.  数据持久化</h2> <p>解决浏览器刷新后数据消失问题</p> <p>利用vuex-persistedstate插件，将vuex的数据存储到浏览器中，刷新后重新拿出来导入vuex中</p> <ul><li>安装</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> vuex-persistedstate  --save
or
<span class="token function">yarn</span> <span class="token function">add</span> vuex-persistedstate
</code></pre></div><ul><li>API
<ul><li><code>key&lt;String&gt;</code>: The key to store the persisted state under. Defaults to <code>vuex</code>.（设置存储key值）</li> <li><code>paths&lt;Array&gt;</code>: An array of any paths to partially persist the state. If no paths are given, the complete state is persisted. If an empty array is given, no state is persisted. Paths must be specified using dot notation. If using modules, include the module name. eg: &quot;auth.user&quot; Defaults to <code>undefined</code>.</li> <li><code>reducer&lt;Function&gt;</code>: A function that will be called to reduce the state to persist based on the given paths. Defaults to include the values.（设置需求数据进行数据持久化）</li> <li><code>subscriber&lt;Function&gt;</code>: A function called to setup mutation subscription. Defaults to <code>store =&gt; handler =&gt; store.subscribe(handler)</code>.</li> <li><code>storage&lt;Object&gt;</code>: Instead for (or in combination with) <code>getState</code> and <code>setState</code>. Defaults to localStorage.（设置存储位置）</li> <li><code>getState&lt;Function&gt;</code>: A function that will be called to rehydrate a previously persisted state. Defaults to using <code>storage</code>.</li> <li><code>setState&lt;Function&gt;</code>: A function that will be called to persist the given state. Defaults to using <code>storage</code>.</li> <li><code>filter&lt;Function&gt;</code>: A function that will be called to filter any mutations which will trigger <code>setState</code> on storage eventually. Defaults to <code>() =&gt; true</code>.</li> <li><code>overwrite&lt;Boolean&gt;</code>: When rehydrating, whether to overwrite the existing state with the output from <code>getState</code> directly, instead of merging the two objects with <code>deepmerge</code>. Defaults to <code>false</code>.</li> <li><code>arrayMerger&lt;Function&gt;</code>: A function for merging arrays when rehydrating state. Defaults to <code>function (store, saved) { return saved }</code> (saved state replaces supplied state).</li> <li><code>rehydrated&lt;Function&gt;</code>: A function that will be called when the rehydration is finished. Useful when you are using Nuxt.js, which the rehydration of the persisted state happens asynchronously. Defaults to <code>store =&gt; {}</code></li> <li><code>fetchBeforeUse&lt;Boolean&gt;</code>: A boolean indicating if the state should be fetched from storage before the plugin is used. Defaults to <code>false</code>.</li> <li><code>assertStorage&lt;Function&gt;</code>: An overridable function to ensure storage is available, fired on plugins's initialization. Default one is performing a Write-Delete operation on the given Storage instance. Note, default behaviour could throw an error (like <code>DOMException: QuotaExceededError</code>).</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> createPersistedState <span class="token keyword">from</span> <span class="token string">&quot;vuex-persistedstate&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">//默认存储到localStorage</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">createPersistedState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">createPersistedState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 修改存储key值</span>
      key<span class="token operator">:</span> <span class="token string">&quot;module-vuex-key&quot;</span><span class="token punctuation">,</span>
      <span class="token comment">// 修改存储位置</span>
      storage<span class="token operator">:</span> window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">,</span>
      <span class="token comment">// 设置需要的数据进行持久化</span>
      <span class="token function">reducer</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
          userInfo<span class="token operator">:</span> val<span class="token punctuation">.</span>userInfo<span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>vuex引用多个插件的写法</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">plugins1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">plugins2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><hr> <div class="Vue"><div class="mid"><div>Vue 内部索引</div> <ul><li>Vue</li> <li>Vue-router</li> <li>Vuex</li> <li>Vue-CLI</li></ul></div></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.3276a3f8.js" defer></script><script src="/assets/js/2.815c1064.js" defer></script><script src="/assets/js/17.2c30d55b.js" defer></script><script src="/assets/js/6.06272484.js" defer></script>
  </body>
</html>
