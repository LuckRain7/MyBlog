(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{293:function(s,t,a){"use strict";a.r(t);var n=a(10),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mongodb"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mongodb"}},[s._v("#")]),s._v(" MongoDB")]),s._v(" "),t("blockquote",[t("p",[s._v("以下系统环境为 Mac")])]),s._v(" "),t("h2",{attrs:{id:"_1-mongodb-安装和使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-mongodb-安装和使用"}},[s._v("#")]),s._v(" 1. MongoDB 安装和使用")]),s._v(" "),t("h3",{attrs:{id:"_1-1-下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-下载"}},[s._v("#")]),s._v(" 1.1 下载")]),s._v(" "),t("p",[s._v("由于 MongoDB 修改了自己的开源协议，Homebrew 不再提供，只能去"),t("a",{attrs:{href:"https://www.mongodb.com/try/download/community?jmp=nav",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),t("OutboundLink")],1),s._v("下载。")]),s._v(" "),t("h3",{attrs:{id:"_1-2-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-安装"}},[s._v("#")]),s._v(" 1.2 安装")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打开 bash_profile 文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" ~/. bash_profile\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加环境变量(路径可以随意设置)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Users/***/APP/mongodb-4.4.7/bin:'),t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v('"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重载 bash_profile")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bash_profile \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试是否安装成功")]),s._v("\nmongod "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n")])])]),t("h3",{attrs:{id:"_1-3-启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-启动"}},[s._v("#")]),s._v(" 1.3 启动")]),s._v(" "),t("p",[s._v("在 MongoDB 目录中新建 data 和 log 文件夹、mongo.conf")]),s._v(" "),t("p",[s._v("mongo.conf 文件内添加以下配置内容")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# mongod.conf\n# https://docs.mongodb.com/manual/reference/configuration-options/\n\n# Where and how to store data.\nstorage:\n  dbPath: /Users/***/APP/mongodb-4.4.7/data\n  journal:\n    enabled: true\n  directoryPerDB: true\n\n# where to write logging data.\nsystemLog:\n  destination: file\n  logAppend: true\n  path: /Users/***/APP/mongodb-4.4.7/log/systemLog.log\n  traceAllExceptions: true # Print verbose information for debugging\n\n# network interfaces\nnet:\n  port: 27017\n  bindIp: 127.0.0.1\n")])])]),t("p",[s._v("配置 zsh 别名，方便启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启编辑")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" ~/.bash_profile\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加下面内容")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("alias")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mongo_start")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"sudo mongod -f /Users/***/APP/mongodb-4.4.7/mongo.conf"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重载")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("source")]),s._v(" ~/.bash_profile\n")])])]),t("p",[s._v("启动")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("mongo_start "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n")])])]),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新终端标签页")]),s._v("\nmongo "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 开启 MongoDB 链接")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试")]),s._v("\nshow dbs "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会显示 admin config local")]),s._v("\n")])])]),t("h3",{attrs:{id:"_1-4-数据库常用命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-数据库常用命令"}},[s._v("#")]),s._v(" 1.4 数据库常用命令")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("show dbs     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询所有数据库")]),s._v("\nuse db_name  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 切换/创建数据库")]),s._v("\n\ndb.createCollection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"col_name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建集合")]),s._v("\ndb.col_name.insert"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"测试一下"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 插入数据")]),s._v("\n\nshow collections    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有 collections")]),s._v("\nshow tables         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 列出所有 tables")]),s._v("\n\ndb.createCollection"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v(","),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("size:20,capped:5,max:100"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 插入一条数据")]),s._v("\n")])])]),t("h3",{attrs:{id:"_1-5-报错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-报错"}},[s._v("#")]),s._v(" 1.5 报错")]),s._v(" "),t("blockquote",[t("p",[s._v("Access control is not enabled for the database. Read and write access to data and configuration is unrestricted")])]),s._v(" "),t("p",[s._v("创建管理员并设置密码")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("use rain\ndb.createUser"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    user: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rain"')]),s._v(", //用户名\n    pwd: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxx"')]),s._v(", //密码\n    roles: "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" role: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"userAdminAnyDatabase"')]),s._v(", db: "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" //设置权限\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);