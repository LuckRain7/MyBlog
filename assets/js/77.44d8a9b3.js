(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{411:function(e,v,r){"use strict";r.r(v);var t=r(17),i=Object(t.a)({},(function(){var e=this,v=e._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("h1",{attrs:{id:"weapp-web-view"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#weapp-web-view"}},[e._v("#")]),e._v(" Weapp web-view")]),e._v(" "),v("blockquote",[v("p",[e._v("官网文档地址： "),v("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("web-view | 微信开放文档"),v("OutboundLink")],1)]),e._v(" "),v("p",[e._v("社区官方问答地址："),v("a",{attrs:{href:"https://developers.weixin.qq.com/community/develop/doc/ebfd9e5ec9986b4f23c41f8d8bbf2730",target:"_blank",rel:"noopener noreferrer"}},[e._v("[web-view]问题汇总 | 微信开放社区"),v("OutboundLink")],1),e._v("（看时间比较老了）")])]),e._v(" "),v("p",[v("strong",[e._v("由于很多使用中的一些问题：")])]),e._v(" "),v("ol",[v("li",[e._v("打开的域名没有在小程序管理后台设置业务域名（注意是业务域名，不是服务器域名）")]),e._v(" "),v("li",[v("strong",[e._v("小程序中的webview如需使用微信相关能力，须配置jssdk")])]),e._v(" "),v("li",[v("strong",[e._v("小程序中的webview有较强的缓存（社区相关问题较多）")]),e._v(" "),v("br"),e._v(" "),v("a",{attrs:{href:"https://developers.weixin.qq.com/community/develop/doc/00068c92ca01d8f8455d9fc0f58c00",target:"_blank",rel:"noopener noreferrer"}},[e._v("web-view嵌入的h5页面缓存严重，如何清除？ | 微信开放社区"),v("OutboundLink")],1),e._v(" "),v("br"),e._v(" "),v("a",{attrs:{href:"https://juejin.cn/post/7098522027291574280",target:"_blank",rel:"noopener noreferrer"}},[e._v("微信小程序web-view缓存问题及解决方案 - 掘金 (juejin.cn)"),v("OutboundLink")],1)]),e._v(" "),v("li",[e._v("打开的页面必须为https服务")]),e._v(" "),v("li",[e._v("打开的页面302过去的地址也必须设置过业务域名")]),e._v(" "),v("li",[e._v("web-view空白问题，请升级微信客户端到 6.5.16")]),e._v(" "),v("li",[e._v("页面可以包含iframe，但是iframe的地址必须为业务域名")]),e._v(" "),v("li",[e._v("web-view不支持支付能力，web-view的API能力见web-view的文档说明")]),e._v(" "),v("li",[e._v("开发者自己检查自己的https服务是否正常，测试方法：普通浏览器打开对应的地址")]),e._v(" "),v("li",[e._v("如果web-view使用了公众号授权的服务，开发者工具提示网页开发者的问题")]),e._v(" "),v("li",[v("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("navigationStyle: custom"),v("OutboundLink")],1),e._v(" 对 "),v("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("web-view"),v("OutboundLink")],1),e._v(" 组件无效")]),e._v(" "),v("li",[e._v("在 iOS 中，若存在JSSDK接口调用无响应的情况，可在 "),v("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/component/web-view.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("web-view"),v("OutboundLink")],1),e._v(" 的 src 后面加个#wechat_redirect解决。")]),e._v(" "),v("li",[e._v("避免在链接中带有中文字符，在 iOS 中会有打开白屏的问题，建议加一下 encodeURIComponent")])]),e._v(" "),v("p",[v("strong",[e._v("其他的问题注意：")])]),e._v(" "),v("ol",[v("li",[e._v("每个页面只能有一个 "),v("code",[e._v("<web-view/>")]),e._v("，"),v("code",[e._v("<web-view/>")]),e._v(" 会自动铺满整个页面，并覆盖其他组件，小程序对webview的监控状态基本没有，只能设置src设置url。")]),e._v(" "),v("li",[e._v("关于小程序和web-view的通信，"),v("code",[e._v("<web-view/>")]),e._v(" 小程序只能通过JSSDK 1.3.0提供的接口返回小程序页面，设置参数来传值，反之，小程序到webview也是一样的，只能是src的路径带上参数；")]),e._v(" "),v("li",[e._v("web-view不支持支付能力,是指无法唤起小程序的直接支付窗口，对于h5的那套支付应该是支持的，但是web-view 里边没法使用 微信支付的 JSAPI，也就是可能可以h5的相关的的支付中心来支付；")]),e._v(" "),v("li",[e._v("关于层级，在webview中可以无限跳转，对于导航条返回和物理键返回都会回到上一个页面直到退出webview，就像"),v("code",[e._v("history.back")]),e._v("。")]),e._v(" "),v("li",[e._v("webview中的html的title会自动放到小程序的头部作为标题；")]),e._v(" "),v("li",[e._v("webview中可以正常使用ajax之类的操作。")])])])}),[],!1,null,null,null);v.default=i.exports}}]);